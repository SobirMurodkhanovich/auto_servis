{% extends "base.html" %}
{% load static %}

{% block content %}
<main style="
    min-height: calc(100vh - 80px);
    padding: 50px 60px;
    background: #f8fafc;
">

    <!-- TOP BAR -->
    <div style="
        max-width:1400px;
        margin:0 auto 30px auto;
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:15px;
        flex-wrap:wrap;
    ">

        <!-- Orqaga -->
        <a href="{% url 'employee-page' %}" style="
            padding:10px 22px;
            background:#e5e7eb;
            color:#111827;
            border-radius:6px;
            text-decoration:none;
            font-size:14px;
            font-weight:500;
        ">Ортга</a>

        <!-- Search -->
        <form method="GET" action="{% url 'auto-list' %}" style="
            display:flex;
            max-width:420px;
            flex-grow:1;
        ">
            <input type="text" name="q"
                   placeholder="Автомобил рақами бўйича қидириш"
                   value="{{ request.GET.q|default:'' }}"
                   style="
                       flex:1;
                       padding:10px 14px;
                       border:1px solid #d1d5db;
                       border-radius:6px 0 0 6px;
                       font-size:14px;
                   ">
            <button type="submit" style="
                padding:10px 18px;
                border:none;
                background:#2563eb;
                color:#fff;
                font-size:14px;
                border-radius:0 6px 6px 0;
                cursor:pointer;
            ">Қидириш</button>
        </form>

        <!-- Add -->
        <a href="{% url 'auto-add' %}" style="
            padding:10px 22px;
            background:#2563eb;
            color:#fff;
            border-radius:6px;
            text-decoration:none;
            font-size:14px;
            font-weight:500;
        ">+ Автомобил қўшиш</a>

    </div>

    <!-- TABLE -->
    <div style="
        max-width:1400px;
        margin:0 auto;
        background:#ffffff;
        border:1px solid #e5e7eb;
        border-radius:8px;
        overflow-x:auto;
    ">
        <table style="
            width:100%;
            border-collapse:collapse;
            font-size:14px;
            color:#111827;
        ">
            <thead style="background:#f1f5f9;">
                <tr>
                    <th style="padding:14px; text-align:left;">Мижоз исми</th>
                    <th style="padding:14px; text-align:left;">Телефон рақами</th>
                    <th style="padding:14px; text-align:left;">Авто рақам</th>
                    <th style="padding:14px; text-align:left;">Пробег</th>
                    <th style="padding:14px; text-align:left;">Қўшилган</th>
                    <th style="padding:14px; text-align:center;">Амаллар</th>
                </tr>
            </thead>

            <tbody>
                {% for auto in autos %}
                <tr style="border-top:1px solid #e5e7eb;">
                    <td style="padding:12px;">{{ auto.customer_name }}</td>
                    <td style="padding:12px;">{{ auto.customer_phone_number }}</td>
                    <td style="padding:12px;">{{ auto.automobile_number }}</td>
                    <td style="padding:12px;">{{ auto.mileage }} км</td>
                    <td style="padding:12px;">{{ auto.created_at|date:"d.m.Y H:i" }}</td>
                    <td style="padding:12px; text-align:center;">

                        <a href="{% url 'avto-edit' auto.pk %}" style="
                            padding:6px 12px;
                            border:1px solid #2563eb;
                            color:#2563eb;
                            border-radius:4px;
                            font-size:13px;
                            text-decoration:none;
                            margin-right:6px;
                        ">Ўзгартириш</a>

                        <a href="{% url 'auto-delete' auto.pk %}" style="
                            padding:6px 12px;
                            border:1px solid #dc2626;
                            color:#dc2626;
                            border-radius:4px;
                            font-size:13px;
                            text-decoration:none;
                        "
                        onclick="return confirm('Ҳақиқатан ҳам ўчирмоқчимисиз?');">
                        Ўчириш</a>

                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="
                        padding:20px;
                        text-align:center;
                        color:#6b7280;
                    ">
                        Ҳозирча маълумот йўқ
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</main>
{% endblock %}